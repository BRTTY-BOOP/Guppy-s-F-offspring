<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­”é›€é±¼é«˜çº§æ‚äº¤è‚²ç§ç®¡ç†ç³»ç»Ÿ | Guppy Breeding System</title>
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <style>
        * { box-sizing: border-box; font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif; }
        body { margin: 0; padding: 20px; background-color: #f0f9ff; color: #333; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; background-color: white; border-radius: 15px; box-shadow: 0 5px 20px rgba(0, 0, 150, 0.08); padding: 25px; position: relative; overflow: hidden; }
        .header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #4a9de3; }
        .header h1 { color: #1a5fa0; margin-bottom: 10px; font-size: 2.2rem; }
        .section { margin-bottom: 40px; padding: 20px; background-color: #f8fbff; border-radius: 12px; border-left: 5px solid #4a9de3; }
        .section-title { color: #1a5fa0; margin-top: 0; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px dashed #a8d0ff; font-size: 1.5rem; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); }
        th { background-color: #1a5fa0; color: white; padding: 14px 12px; text-align: left; font-weight: 600; }
        td { padding: 12px; border-bottom: 1px solid #e1eef9; vertical-align: top; }
        tr:nth-child(even) { background-color: #f8fbff; }
        tr:hover { background-color: #e8f2ff; }
        .hybrid-formula { font-family: 'Courier New', monospace; background-color: #f0f7ff; padding: 8px 12px; border-radius: 6px; border-left: 3px solid #4a9de3; margin: 5px 0; }
        .btn { padding: 12px 24px; background-color: #1a5fa0; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 600; transition: all 0.3s; margin-right: 10px; margin-bottom: 10px; }
        .btn:hover { background-color: #13497a; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
        .btn-excel { background-color: #217346; }
        .btn-excel:hover { background-color: #1a5c38; }
        .controls { display: flex; flex-wrap: wrap; justify-content: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #e1eef9; }
        .watermark { position: absolute; bottom: 10px; right: 15px; opacity: 0.05; font-size: 6rem; color: #1a5fa0; z-index: 0; pointer-events: none; }
        /* è¯­è¨€åˆ‡æ¢æŒ‰é’®æ ·å¼ */
        .lang-switcher { position: absolute; top: 25px; right: 25px; z-index: 1000; }
        .lang-btn { padding: 8px 16px; background-color: #4a9de3; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .lang-btn:hover { background-color: #2c7bc2; }
        @media (max-width: 768px) {
            .container { padding: 15px; }
            .lang-switcher { position: static; text-align: right; margin-bottom: 15px; }
            th, td { padding: 8px; }
            .btn { width: 100%; margin-bottom: 10px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="lang-switcher">
            <button id="toggleLang" class="lang-btn">EN</button>
        </div>
        <div class="watermark" data-i18n="watermark">å­”é›€é±¼è‚²ç§</div>

        <div class="header">
            <h1 data-i18n="title">ğŸ  å­”é›€é±¼é«˜çº§æ‚äº¤è‚²ç§ç®¡ç†ç³»ç»Ÿ ğŸ </h1>
            <p data-i18n="subtitle">ä¸ºæ‚¨æä¾›çš„å­”é›€é±¼å“ç§è®¾è®¡ç§‘å­¦çš„æ‚äº¤å…¬å¼ï¼Œå¹¶è®°å½•ç¹è‚²é¡¹ç›®ä»¥è·å¾—ä¼˜è‰¯F1å­ä»£</p>
        </div>

        <div class="section">
            <h2 class="section-title" data-i18n="breedList">ğŸ“‹ æ‚¨çš„å­”é›€é±¼å“ç§æ¸…å•</h2>
            <p data-i18n="breedDesc">æ ¹æ®æ‚¨æä¾›çš„å“ç§ï¼Œç³»ç»Ÿå·²è‡ªåŠ¨åˆ†ç±»å¹¶è®¾è®¡æ‚äº¤å…¬å¼ï¼š</p>
            <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px;">
                <span style="background-color: #e1f0ff; padding: 8px 15px; border-radius: 20px;">å¤©ç©ºè“</span>
                <span style="background-color: #e1f0ff; padding: 8px 15px; border-radius: 20px;">ç«çƒ§äº‘å¤©ç©ºè“</span>
                <span style="background-color: #e1f0ff; padding: 8px 15px; border-radius: 20px;">è“ç¤¼æœå¤§C</span>
                <span style="background-color: #e1f0ff; padding: 8px 15px; border-radius: 20px;">æ™®é€šè“ç¤¼æœ</span>
                <span style="background-color: #e1f0ff; padding: 8px 15px; border-radius: 20px;">å†°è“</span>
                <span style="background-color: #e1f0ff; padding: 8px 15px; border-radius: 20px;">ç™½é‡‘è±¡è€³</span>
                <span style="background-color: #e1f0ff; padding: 8px 15px; border-radius: 20px;">æ‹‰æœ±è‰</span>
                <span style="background-color: #e1f0ff; padding: 8px 15px; border-radius: 20px;">å½©è™¹å¤©ä½¿</span>
                <span style="background-color: #e1f0ff; padding: 8px 15px; border-radius: 20px;">é‡‘ç²‰</span>
                <span style="background-color: #e1f0ff; padding: 8px 15px; border-radius: 20px;">è“è‰å°¾</span>
                <span style="background-color: #e1f0ff; padding: 8px 15px; border-radius: 20px;">é‡‘å±è“è‰å°¾</span>
                <span style="background-color: #e1f0ff; padding: 8px 15px; border-radius: 20px;">è·‘çº¢ä½“è“è‰å°¾</span>
                <span style="background-color: #e1f0ff; padding: 8px 15px; border-radius: 20px;">èŠèŠ±å¸†è¤¶æ‰‡</span>
                <span style="background-color: #ffe1e1; padding: 8px 15px; border-radius: 20px;">å®‰æ ¼æ‹‰æ–¯åŒå‰‘é±¼</span>
                <span style="background-color: #ffe1e1; padding: 8px 15px; border-radius: 20px;">ç«ç„°ç²¾çµå‰‘é±¼</span>
                <span style="background-color: #ffe1e1; padding: 8px 15px; border-radius: 20px;">æ—¥æœ¬è“ç™½çº¢å‰‘å°¾å­”é›€é±¼</span>
            </div>
            <p style="margin-top:15px;font-style:italic;color:#666;" data-i18n="geneticNote">æ³¨ï¼š<span style="color: #ff6b6b;">çº¢è‰²èƒŒæ™¯</span>å“ç§ä¸ºå‰‘å°¾é±¼ï¼Œä¸å­”é›€é±¼å­˜åœ¨ç”Ÿæ®–éš”ç¦»ï¼Œæ— æ³•æ‚äº¤ï¼Œå»ºè®®åˆ†å¼€é¥²å…»ã€‚</p>
        </div>

        <div class="section">
            <h2 class="section-title" data-i18n="hybridTitle">ğŸ§¬ ç§‘å­¦æ‚äº¤å…¬å¼ (F1ä»£ä¼˜è´¨ç»„åˆ)</h2>
            <p data-i18n="hybridDesc">åŸºäºé—ä¼ å­¦åŸç†è®¾è®¡çš„ç»„åˆï¼Œæ—¨åœ¨è·å¾—å“ç›¸ä¼˜è‰¯ã€åŸºå› ç¨³å®šçš„F1å­ä»£ï¼š</p>
            <table id="hybridTable">
                <thead>
                    <tr>
                        <th width="20%" data-i18n="comboName">ç»„åˆåç§°</th>
                        <th width="25%" data-i18n="formula">æ‚äº¤å…¬å¼</th>
                        <th width="35%" data-i18n="f1Expectation">F1ä»£é¢„æœŸè¡¨ç°ä¸é€‰è‚²ç›®æ ‡</th>
                        <th width="20%" data-i18n="geneticKey">é—ä¼ å…³é”®ç‚¹</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong data-i18n="combo1Name">ç¤¼æœå¤©ç©ºè“å¼ºåŒ–</strong></td>
                        <td>
                            <div class="hybrid-formula" data-i18n="combo1Formula1">â™€ è“ç¤¼æœå¤§C Ã— â™‚ ç«çƒ§äº‘å¤©ç©ºè“</div>
                            <div style="text-align:center;" data-i18n="or">æˆ–</div>
                            <div class="hybrid-formula" data-i18n="combo1Formula2">â™€ æ™®é€šè“ç¤¼æœ Ã— â™‚ å¤©ç©ºè“</div>
                        </td>
                        <td data-i18n="combo1Desc">è·å¾—å°¾å‹é¥±æ»¡(ç¤¼æœåŸºå› )ä¸”ä½“è‰²é²œäº®(å¤©ç©ºè“åŸºå› )çš„ä¸ªä½“ã€‚F1ä»£ä¸­ç­›é€‰:<br>1. å°¾é³å®½å¤§ä¸”è¾¹ç¼˜é»‘è‰²æ˜æ˜¾<br>2. è“è‰²ä½“è‰²çº¯å‡€æ— æ‚æ–‘<br>3. èƒŒé³é«˜è€¸çš„ä¸ªä½“ç•™ç§</td>
                        <td data-i18n="combo1Key">ç¤¼æœåŸºå› (åŠæ˜¾æ€§)+å¤©ç©ºè“åŸºå› (æ€§è¿é”)</td>
                    </tr>
                    <tr>
                        <td><strong data-i18n="combo2Name">é‡‘å±è“è‰æ”¹è‰¯</strong></td>
                        <td>
                            <div class="hybrid-formula" data-i18n="combo2Formula1">â™€ è“è‰å°¾ Ã— â™‚ é‡‘å±è“è‰å°¾</div>
                            <div style="text-align:center;" data-i18n="or">æˆ–</div>
                            <div class="hybrid-formula" data-i18n="combo2Formula2">â™€ è·‘çº¢ä½“è“è‰ Ã— â™‚ é‡‘å±è“è‰å°¾</div>
                        </td>
                        <td data-i18n="combo2Desc">å¢å¼ºè‰å°¾çš„é‡‘å±å…‰æ³½ä¸è“è‰²é¥±å’Œåº¦ã€‚è·‘çº¢ä½“ç»„åˆå¯å¼•å…¥é»„åŒ–åŸºå› æ”¹å–„ä½“å‹ã€‚F1ä»£ä¸­ç­›é€‰:<br>1. é³ç‰‡é‡‘å±åå…‰å¼ºçƒˆ<br>2. å°¾é³çº¹è·¯æ¸…æ™°æ•´é½<br>3. ä½“å‹åŒ€ç§°æ— è„ŠæŸ±å¼¯æ›²</td>
                        <td data-i18n="combo2Key">é‡‘å±åŸºå› (é™æ€§)+è“è‰åŸºå› (å¤šåŸºå› )</td>
                    </tr>
                    <tr>
                        <td><strong data-i18n="combo3Name">å†°è“å¤©ç©ºèåˆ</strong></td>
                        <td>
                            <div class="hybrid-formula" data-i18n="combo3Formula1">â™€ å†°è“ Ã— â™‚ å¤©ç©ºè“</div>
                            <div style="text-align:center;" data-i18n="or">æˆ–</div>
                            <div class="hybrid-formula" data-i18n="combo3Formula2">â™€ å†°è“ Ã— â™‚ ç«çƒ§äº‘å¤©ç©ºè“</div>
                        </td>
                        <td data-i18n="combo3Desc">åˆ›é€ æ·¡é›…ä¸é²œäº®ä¹‹é—´çš„è¿‡æ¸¡è‰²ç³»ã€‚å¯èƒ½è·å¾—"å†°æ™¶å¤©ç©ºè“"æ–°è¡¨ç°å‹ã€‚F1ä»£ä¸­ç­›é€‰:<br>1. ä½“è‰²å‡åŒ€æ— æ–‘å—<br>2. è“è‰²å…·æœ‰é€šé€æ„Ÿ<br>3. èƒŒé³ä¸å°¾é³é¢œè‰²åè°ƒ</td>
                        <td data-i18n="combo3Key">å†°è“åŸºå› (éšæ€§)+å¤©ç©ºè“åŸºå› (æ€§è¿é”)</td>
                    </tr>
                    <tr>
                        <td><strong data-i18n="combo4Name">ç™½é‡‘åŸºå› æçº¯</strong></td>
                        <td>
                            <div class="hybrid-formula" data-i18n="combo4Formula1">â™€ ç™½é‡‘è±¡è€³ Ã— â™‚ ç™½é‡‘è±¡è€³</div>
                            <div style="text-align:center;" data-i18n="or">æˆ–</div>
                            <div class="hybrid-formula" data-i18n="combo4Formula2">â™€ ç™½é‡‘è±¡è€³ Ã— â™‚ è·‘çº¢ä½“è“è‰</div>
                        </td>
                        <td data-i18n="combo4Desc">æçº¯ç™½é‡‘åŸºå› æˆ–å¼•å…¥é»„åŒ–åŸºå› æ”¹å–„ä½“å‹ã€‚F1ä»£ä¸­ç­›é€‰:<br>1. ç™½é‡‘è¦†ç›–é¢ç§¯â‰¥80%<br>2. è€³çŠ¶èƒ¸é³æ˜æ˜¾<br>3. ä½“å‹å¥å£®æ— ç•¸å½¢</td>
                        <td data-i18n="combo4Key">ç™½é‡‘åŸºå› (é™æ€§)+è·‘çº¢ä½“åŸºå› (éšæ€§)</td>
                    </tr>
                    <tr>
                        <td><strong data-i18n="combo5Name">ç‰¹æ®Šå°¾å‹å›ºå®š</strong></td>
                        <td>
                            <div class="hybrid-formula" data-i18n="combo5Formula1">â™€ èŠèŠ±å¸†è¤¶æ‰‡ Ã— â™‚ è“ç¤¼æœå¤§C</div>
                            <div style="text-align:center;" data-i18n="or">æˆ–</div>
                            <div class="hybrid-formula" data-i18n="combo5Formula2">â™€ èŠèŠ±å¸†è¤¶æ‰‡ Ã— â™‚ é‡‘å±è“è‰å°¾</div>
                        </td>
                        <td data-i18n="combo5Desc">å°†ç‰¹æ®Šå°¾å‹ä¸ä¼˜è´¨ä½“è‰²ç»“åˆã€‚F1ä»£ä¸­ç­›é€‰:<br>1. å°¾é³è¤¶çš±åˆ†æ˜å‘ˆèŠèŠ±çŠ¶<br>2. å±•å¼€è§’åº¦â‰¥120Â°<br>3. æ¸¸å§¿ç¨³å¥ä¸æ­ªæ–œ</td>
                        <td data-i18n="combo5Key">èŠèŠ±å°¾åŸºå› (å¤šåŸºå› )+ç¤¼æœ/é‡‘å±åŸºå› </td>
                    </tr>
                    <tr>
                        <td><strong data-i18n="combo6Name">è‡ªäº¤æçº¯ç»„åˆ</strong></td>
                        <td>
                            <div class="hybrid-formula" data-i18n="combo6Formula1">â™€ æ‹‰æœ±è‰ Ã— â™‚ æ‹‰æœ±è‰</div>
                            <div class="hybrid-formula" data-i18n="combo6Formula2">â™€ å½©è™¹å¤©ä½¿ Ã— â™‚ å½©è™¹å¤©ä½¿</div>
                            <div class="hybrid-formula" data-i18n="combo6Formula3">â™€ é‡‘ç²‰ Ã— â™‚ é‡‘ç²‰</div>
                        </td>
                        <td data-i18n="combo6Desc">ä¿æŒçº¯ç§åŸºå› ç¨³å®šæ€§ï¼Œé˜²æ­¢é€€åŒ–ã€‚è¿ç»­è‡ªäº¤ä¸è¶…è¿‡3ä»£ï¼Œéœ€è®°å½•æ¯ä»£è¡¨ç°ã€‚</td>
                        <td data-i18n="combo6Key">çº¯åˆå­ç»´æŒï¼Œæ³¨æ„è¿‘äº¤è¡°é€€</td>
                    </tr>
                </tbody>
            </table>
            <p style="font-style:italic;color:#666;font-size:0.9rem;" data-i18n="hybridNote">æ³¨ï¼šæ‰€æœ‰æ‚äº¤å»ºè®®ä½¿ç”¨6æœˆé¾„ä»¥ä¸Šå¥åº·ç§é±¼ï¼Œé›Œé›„æ¯”ä¾‹å»ºè®®1:2æˆ–1:3ï¼Œäº§å‰æä¾›å……è¶³æ´»é¥µã€‚</p>
        </div>

        <div class="section">
            <h2 class="section-title" data-i18n="recordTitle">ğŸ“ ç¹è‚²é¡¹ç›®è®°å½•è¡¨</h2>
            <p data-i18n="recordDesc">è®°å½•æ¯æ¬¡æ‚äº¤å®éªŒçš„è¯¦ç»†ä¿¡æ¯ï¼Œç”¨äºè¿½è¸ªF1ä»£è¡¨ç°å’Œé€‰è‚²è¿›ç¨‹ï¼š</p>
            <div style="margin-bottom:20px;">
                <button class="btn" id="addRecordBtn" data-i18n="addRecord">+ æ·»åŠ æ–°è®°å½•</button>
                <button class="btn" id="clearBtn" data-i18n="clearTable">æ¸…ç©ºè¡¨æ ¼</button>
            </div>
            <table id="breedingTable">
                <thead>
                    <tr>
                        <th width="8%" data-i18n="recordId">è®°å½•ID</th>
                        <th width="12%" data-i18n="hybridDate">æ‚äº¤æ—¥æœŸ</th>
                        <th width="15%" data-i18n="hybridCombo">æ‚äº¤ç»„åˆ</th>
                        <th width="10%" data-i18n="femaleId">æ¯æœ¬ç¼–å·</th>
                        <th width="10%" data-i18n="maleId">çˆ¶æœ¬ç¼–å·</th>
                        <th width="10%" data-i18n="spawnDate">äº§åµæ—¥æœŸ</th>
                        <th width="8%" data-i18n="f1Count">F1æ•°é‡</th>
                        <th width="27%" data-i18n="f1Notes">F1ä»£è¡¨ç°ä¸é€‰ç•™è®°å½•</th>
                    </tr>
                </thead>
                <tbody id="breedingTableBody">
                    <tr>
                        <td>BR-001</td>
                        <td><input type="date" value="2023-10-15"></td>
                        <td>
                            <select>
                                <option data-i18n="combo1Name">ç¤¼æœå¤©ç©ºè“å¼ºåŒ–</option>
                                <option data-i18n="combo2Name" selected>é‡‘å±è“è‰æ”¹è‰¯</option>
                                <option data-i18n="combo3Name">å†°è“å¤©ç©ºèåˆ</option>
                                <option data-i18n="combo4Name">ç™½é‡‘åŸºå› æçº¯</option>
                                <option data-i18n="combo5Name">ç‰¹æ®Šå°¾å‹å›ºå®š</option>
                                <option data-i18n="combo6Name">è‡ªäº¤æçº¯ç»„åˆ</option>
                            </select>
                        </td>
                        <td><input type="text" value="F-è“è‰-03" data-i18n-ph="femalePlaceholder" placeholder="å¦‚: F-è“è‰-03"></td>
                        <td><input type="text" value="M-é‡‘å±è‰-07" data-i18n-ph="malePlaceholder" placeholder="å¦‚: M-é‡‘å±è‰-07"></td>
                        <td><input type="date" value="2023-10-30"></td>
                        <td><input type="number" value="42" min="0" data-i18n-ph="countPlaceholder" placeholder="æ•°é‡"></td>
                        <td><textarea rows="2" data-i18n-ph="notesPlaceholder" placeholder="è®°å½•F1ä»£è¡¨ç°...">35å¤©æ—¶ç­›é€‰ï¼š10æ¡é‡‘å±æ„Ÿå¼ºï¼Œå°¾å‹ä½³ï¼Œå·²éš”ç¦»åŸ¹å…»</textarea></td>
                    </tr>
                </tbody>
            </table>
            <div style="margin-top:20px;">
                <label for="notes" style="display:block;margin-bottom:8px;color:#1a5fa0;font-weight:600;" data-i18n="currentNotes">æœ¬æ¬¡è®°å½•å¤‡æ³¨</label>
                <textarea id="notes" rows="3" data-i18n-ph="currentNotesPlaceholder" placeholder="è®°å½•æœ¬æ¬¡æ‚äº¤çš„ç‰¹æ®Šæƒ…å†µã€è§‚å¯Ÿå‘ç°æˆ–åç»­è®¡åˆ’..." style="width:100%;padding:12px;border:1px solid #b8d4f0;border-radius:6px;"></textarea>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-excel" id="exportExcelBtn" data-i18n="exportExcel">ğŸ“¥ ä¸‹è½½Excelè‚²ç§è®°å½•è¡¨</button>
            <button class="btn" id="printBtn" data-i18n="print">ğŸ–¨ï¸ æ‰“å°å½“å‰é¡µé¢</button>
            <button class="btn" id="saveDataBtn" data-i18n="saveLocal">ğŸ’¾ ä¿å­˜æ•°æ®åˆ°æœ¬åœ°</button>
        </div>

        <div class="section">
            <h2 class="section-title" data-i18n="expertTips">ğŸ’¡ è‚²ç§ä¸“å®¶å»ºè®®</h2>
            <ol>
                <li data-i18n="tip1"><strong>åŸºå› åˆ†ç¦»è§„å¾‹</strong>ï¼šF1ä»£å¯èƒ½å‘ˆç°äº²æœ¬ä¸­é—´æ€§çŠ¶ï¼ŒF2ä»£æ‰ä¼šå‡ºç°æ€§çŠ¶åˆ†ç¦»ï¼Œå»ºè®®ä¿ç•™F2ä»£ç»§ç»­é€‰è‚²ã€‚</li>
                <li data-i18n="tip2"><strong>é€‰è‚²æ ‡å‡†</strong>ï¼šé‡ç‚¹å…³æ³¨å°¾å‹ã€ä½“è‰²ã€ä½“å‹ã€æ¸¸å§¿å››ä¸ªæŒ‡æ ‡ï¼Œæ¯ä¸ªæŒ‡æ ‡è®¾å®šå…·ä½“æ ‡å‡†ã€‚</li>
                <li data-i18n="tip3"><strong>è®°å½•é‡è¦æ€§</strong>ï¼šè¯¦ç»†è®°å½•æ¯ä»£äº²æœ¬ç¼–å·ï¼Œé¿å…è¿‘äº²ç¹æ®–å¯¼è‡´åŸºå› è¡°é€€ã€‚</li>
                <li data-i18n="tip4"><strong>å‰‘å°¾é±¼å¤„ç†</strong>ï¼šå‰‘å°¾é±¼ä¸å­”é›€é±¼å­˜åœ¨ç”Ÿæ®–éš”ç¦»ï¼Œè¯·åˆ†å¼€é¥²å…»ã€‚</li>
                <li data-i18n="tip5"><strong>å¥åº·ç®¡ç†</strong>ï¼šç¹æ®–æœŸæä¾›é«˜è›‹ç™½æ´»é¥µï¼Œä¿æŒæ°´è´¨ç¨³å®šï¼ˆpH 7.0-7.5ï¼Œæ¸©åº¦24-26â„ƒï¼‰ã€‚</li>
            </ol>
        </div>

        <div style="text-align:center;margin-top:40px;color:#666;font-size:0.9rem;padding-top:20px;border-top:1px solid #e1eef9;">
            <p data-i18n="footer">å­”é›€é±¼é«˜çº§æ‚äº¤è‚²ç§ç®¡ç†ç³»ç»Ÿ | åŸºäºé—ä¼ å­¦åŸç†è®¾è®¡ | æ•°æ®ä»…å­˜å‚¨äºæœ¬åœ°æµè§ˆå™¨</p>
        </div>
    </div>

    <script>
        // ä¸­è‹±æ–‡ç¿»è¯‘å­—å…¸
        const translations = {
            'zh': {
                'title': 'ğŸ  å­”é›€é±¼é«˜çº§æ‚äº¤è‚²ç§ç®¡ç†ç³»ç»Ÿ ğŸ ',
                'subtitle': 'ä¸ºæ‚¨æä¾›çš„å­”é›€é±¼å“ç§è®¾è®¡ç§‘å­¦çš„æ‚äº¤å…¬å¼ï¼Œå¹¶è®°å½•ç¹è‚²é¡¹ç›®ä»¥è·å¾—ä¼˜è‰¯F1å­ä»£',
                'watermark': 'å­”é›€é±¼è‚²ç§',
                'breedList': 'ğŸ“‹ æ‚¨çš„å­”é›€é±¼å“ç§æ¸…å•',
                'breedDesc': 'æ ¹æ®æ‚¨æä¾›çš„å“ç§ï¼Œç³»ç»Ÿå·²è‡ªåŠ¨åˆ†ç±»å¹¶è®¾è®¡æ‚äº¤å…¬å¼ï¼š',
                'geneticNote': 'æ³¨ï¼šçº¢è‰²èƒŒæ™¯å“ç§ä¸ºå‰‘å°¾é±¼ï¼Œä¸å­”é›€é±¼å­˜åœ¨ç”Ÿæ®–éš”ç¦»ï¼Œæ— æ³•æ‚äº¤ï¼Œå»ºè®®åˆ†å¼€é¥²å…»ã€‚',
                'hybridTitle': 'ğŸ§¬ ç§‘å­¦æ‚äº¤å…¬å¼ (F1ä»£ä¼˜è´¨ç»„åˆ)',
                'hybridDesc': 'åŸºäºé—ä¼ å­¦åŸç†è®¾è®¡çš„ç»„åˆï¼Œæ—¨åœ¨è·å¾—å“ç›¸ä¼˜è‰¯ã€åŸºå› ç¨³å®šçš„F1å­ä»£ï¼š',
                'comboName': 'ç»„åˆåç§°',
                'formula': 'æ‚äº¤å…¬å¼',
                'f1Expectation': 'F1ä»£é¢„æœŸè¡¨ç°ä¸é€‰è‚²ç›®æ ‡',
                'geneticKey': 'é—ä¼ å…³é”®ç‚¹',
                'combo1Name': 'ç¤¼æœå¤©ç©ºè“å¼ºåŒ–',
                'combo1Formula1': 'â™€ è“ç¤¼æœå¤§C Ã— â™‚ ç«çƒ§äº‘å¤©ç©ºè“',
                'combo1Formula2': 'â™€ æ™®é€šè“ç¤¼æœ Ã— â™‚ å¤©ç©ºè“',
                'combo1Desc': 'è·å¾—å°¾å‹é¥±æ»¡(ç¤¼æœåŸºå› )ä¸”ä½“è‰²é²œäº®(å¤©ç©ºè“åŸºå› )çš„ä¸ªä½“ã€‚F1ä»£ä¸­ç­›é€‰:<br>1. å°¾é³å®½å¤§ä¸”è¾¹ç¼˜é»‘è‰²æ˜æ˜¾<br>2. è“è‰²ä½“è‰²çº¯å‡€æ— æ‚æ–‘<br>3. èƒŒé³é«˜è€¸çš„ä¸ªä½“ç•™ç§',
                'combo1Key': 'ç¤¼æœåŸºå› (åŠæ˜¾æ€§)+å¤©ç©ºè“åŸºå› (æ€§è¿é”)',
                'combo2Name': 'é‡‘å±è“è‰æ”¹è‰¯',
                'combo2Formula1': 'â™€ è“è‰å°¾ Ã— â™‚ é‡‘å±è“è‰å°¾',
                'combo2Formula2': 'â™€ è·‘çº¢ä½“è“è‰ Ã— â™‚ é‡‘å±è“è‰å°¾',
                'combo2Desc': 'å¢å¼ºè‰å°¾çš„é‡‘å±å…‰æ³½ä¸è“è‰²é¥±å’Œåº¦ã€‚è·‘çº¢ä½“ç»„åˆå¯å¼•å…¥é»„åŒ–åŸºå› æ”¹å–„ä½“å‹ã€‚F1ä»£ä¸­ç­›é€‰:<br>1. é³ç‰‡é‡‘å±åå…‰å¼ºçƒˆ<br>2. å°¾é³çº¹è·¯æ¸…æ™°æ•´é½<br>3. ä½“å‹åŒ€ç§°æ— è„ŠæŸ±å¼¯æ›²',
                'combo2Key': 'é‡‘å±åŸºå› (é™æ€§)+è“è‰åŸºå› (å¤šåŸºå› )',
                'combo3Name': 'å†°è“å¤©ç©ºèåˆ',
                'combo3Formula1': 'â™€ å†°è“ Ã— â™‚ å¤©ç©ºè“',
                'combo3Formula2': 'â™€ å†°è“ Ã— â™‚ ç«çƒ§äº‘å¤©ç©ºè“',
                'combo3Desc': 'åˆ›é€ æ·¡é›…ä¸é²œäº®ä¹‹é—´çš„è¿‡æ¸¡è‰²ç³»ã€‚å¯èƒ½è·å¾—"å†°æ™¶å¤©ç©ºè“"æ–°è¡¨ç°å‹ã€‚F1ä»£ä¸­ç­›é€‰:<br>1. ä½“è‰²å‡åŒ€æ— æ–‘å—<br>2. è“è‰²å…·æœ‰é€šé€æ„Ÿ<br>3. èƒŒé³ä¸å°¾é³é¢œè‰²åè°ƒ',
                'combo3Key': 'å†°è“åŸºå› (éšæ€§)+å¤©ç©ºè“åŸºå› (æ€§è¿é”)',
                'combo4Name': 'ç™½é‡‘åŸºå› æçº¯',
                'combo4Formula1': 'â™€ ç™½é‡‘è±¡è€³ Ã— â™‚ ç™½é‡‘è±¡è€³',
                'combo4Formula2': 'â™€ ç™½é‡‘è±¡è€³ Ã— â™‚ è·‘çº¢ä½“è“è‰',
                'combo4Desc': 'æçº¯ç™½é‡‘åŸºå› æˆ–å¼•å…¥é»„åŒ–åŸºå› æ”¹å–„ä½“å‹ã€‚F1ä»£ä¸­ç­›é€‰:<br>1. ç™½é‡‘è¦†ç›–é¢ç§¯â‰¥80%<br>2. è€³çŠ¶èƒ¸é³æ˜æ˜¾<br>3. ä½“å‹å¥å£®æ— ç•¸å½¢',
                'combo4Key': 'ç™½é‡‘åŸºå› (é™æ€§)+è·‘çº¢ä½“åŸºå› (éšæ€§)',
                'combo5Name': 'ç‰¹æ®Šå°¾å‹å›ºå®š',
                'combo5Formula1': 'â™€ èŠèŠ±å¸†è¤¶æ‰‡ Ã— â™‚ è“ç¤¼æœå¤§C',
                'combo5Formula2': 'â™€ èŠèŠ±å¸†è¤¶æ‰‡ Ã— â™‚ é‡‘å±è“è‰å°¾',
                'combo5Desc': 'å°†ç‰¹æ®Šå°¾å‹ä¸ä¼˜è´¨ä½“è‰²ç»“åˆã€‚F1ä»£ä¸­ç­›é€‰:<br>1. å°¾é³è¤¶çš±åˆ†æ˜å‘ˆèŠèŠ±çŠ¶<br>2. å±•å¼€è§’åº¦â‰¥120Â°<br>3. æ¸¸å§¿ç¨³å¥ä¸æ­ªæ–œ',
                'combo5Key': 'èŠèŠ±å°¾åŸºå› (å¤šåŸºå› )+ç¤¼æœ/é‡‘å±åŸºå› ',
                'combo6Name': 'è‡ªäº¤æçº¯ç»„åˆ',
                'combo6Formula1': 'â™€ æ‹‰æœ±è‰ Ã— â™‚ æ‹‰æœ±è‰',
                'combo6Formula2': 'â™€ å½©è™¹å¤©ä½¿ Ã— â™‚ å½©è™¹å¤©ä½¿',
                'combo6Formula3': 'â™€ é‡‘ç²‰ Ã— â™‚ é‡‘ç²‰',
                'combo6Desc': 'ä¿æŒçº¯ç§åŸºå› ç¨³å®šæ€§ï¼Œé˜²æ­¢é€€åŒ–ã€‚è¿ç»­è‡ªäº¤ä¸è¶…è¿‡3ä»£ï¼Œéœ€è®°å½•æ¯ä»£è¡¨ç°ã€‚',
                'combo6Key': 'çº¯åˆå­ç»´æŒï¼Œæ³¨æ„è¿‘äº¤è¡°é€€',
                'or': 'æˆ–',
                'hybridNote': 'æ³¨ï¼šæ‰€æœ‰æ‚äº¤å»ºè®®ä½¿ç”¨6æœˆé¾„ä»¥ä¸Šå¥åº·ç§é±¼ï¼Œé›Œé›„æ¯”ä¾‹å»ºè®®1:2æˆ–1:3ï¼Œäº§å‰æä¾›å……è¶³æ´»é¥µã€‚',
                'recordTitle': 'ğŸ“ ç¹è‚²é¡¹ç›®è®°å½•è¡¨',
                'recordDesc': 'è®°å½•æ¯æ¬¡æ‚äº¤å®éªŒçš„è¯¦ç»†ä¿¡æ¯ï¼Œç”¨äºè¿½è¸ªF1ä»£è¡¨ç°å’Œé€‰è‚²è¿›ç¨‹ï¼š',
                'addRecord': '+ æ·»åŠ æ–°è®°å½•',
                'clearTable': 'æ¸…ç©ºè¡¨æ ¼',
                'recordId': 'è®°å½•ID',
                'hybridDate': 'æ‚äº¤æ—¥æœŸ',
                'hybridCombo': 'æ‚äº¤ç»„åˆ',
                'femaleId': 'æ¯æœ¬ç¼–å·',
                'maleId': 'çˆ¶æœ¬ç¼–å·',
                'spawnDate': 'äº§åµæ—¥æœŸ',
                'f1Count': 'F1æ•°é‡',
                'f1Notes': 'F1ä»£è¡¨ç°ä¸é€‰ç•™è®°å½•',
                'femalePlaceholder': 'å¦‚: F-è“è‰-03',
                'malePlaceholder': 'å¦‚: M-é‡‘å±è‰-07',
                'countPlaceholder': 'æ•°é‡',
                'notesPlaceholder': 'è®°å½•F1ä»£è¡¨ç°...',
                'currentNotes': 'æœ¬æ¬¡è®°å½•å¤‡æ³¨',
                'currentNotesPlaceholder': 'è®°å½•æœ¬æ¬¡æ‚äº¤çš„ç‰¹æ®Šæƒ…å†µã€è§‚å¯Ÿå‘ç°æˆ–åç»­è®¡åˆ’...',
                'exportExcel': 'ğŸ“¥ ä¸‹è½½Excelè‚²ç§è®°å½•è¡¨',
                'print': 'ğŸ–¨ï¸ æ‰“å°å½“å‰é¡µé¢',
                'saveLocal': 'ğŸ’¾ ä¿å­˜æ•°æ®åˆ°æœ¬åœ°',
                'expertTips': 'ğŸ’¡ è‚²ç§ä¸“å®¶å»ºè®®',
                'tip1': '<strong>åŸºå› åˆ†ç¦»è§„å¾‹</strong>ï¼šF1ä»£å¯èƒ½å‘ˆç°äº²æœ¬ä¸­é—´æ€§çŠ¶ï¼ŒF2ä»£æ‰ä¼šå‡ºç°æ€§çŠ¶åˆ†ç¦»ï¼Œå»ºè®®ä¿ç•™F2ä»£ç»§ç»­é€‰è‚²ã€‚',
                'tip2': '<strong>é€‰è‚²æ ‡å‡†</strong>ï¼šé‡ç‚¹å…³æ³¨å°¾å‹ã€ä½“è‰²ã€ä½“å‹ã€æ¸¸å§¿å››ä¸ªæŒ‡æ ‡ï¼Œæ¯ä¸ªæŒ‡æ ‡è®¾å®šå…·ä½“æ ‡å‡†ã€‚',
                'tip3': '<strong>è®°å½•é‡è¦æ€§</strong>ï¼šè¯¦ç»†è®°å½•æ¯ä»£äº²æœ¬ç¼–å·ï¼Œé¿å…è¿‘äº²ç¹æ®–å¯¼è‡´åŸºå› è¡°é€€ã€‚',
                'tip4': '<strong>å‰‘å°¾é±¼å¤„ç†</strong>ï¼šå‰‘å°¾é±¼ä¸å­”é›€é±¼å­˜åœ¨ç”Ÿæ®–éš”ç¦»ï¼Œè¯·åˆ†å¼€é¥²å…»ã€‚',
                'tip5': '<strong>å¥åº·ç®¡ç†</strong>ï¼šç¹æ®–æœŸæä¾›é«˜è›‹ç™½æ´»é¥µï¼Œä¿æŒæ°´è´¨ç¨³å®šï¼ˆpH 7.0-7.5ï¼Œæ¸©åº¦24-26â„ƒï¼‰ã€‚',
                'footer': 'å­”é›€é±¼é«˜çº§æ‚äº¤è‚²ç§ç®¡ç†ç³»ç»Ÿ | åŸºäºé—ä¼ å­¦åŸç†è®¾è®¡ | æ•°æ®ä»…å­˜å‚¨äºæœ¬åœ°æµè§ˆå™¨'
            },
            'en': {
                'title': 'ğŸ  Guppy Advanced Hybrid Breeding Management System ğŸ ',
                'subtitle': 'Design scientific hybridization formulas for your guppy varieties and record breeding projects to obtain excellent F1 offspring.',
                'watermark': 'Guppy Breeding',
                'breedList': 'ğŸ“‹ Your Guppy Varieties List',
                'breedDesc': 'Based on the varieties you provided, the system has automatically categorized and designed hybridization formulas:',
                'geneticNote': 'Note: Varieties with <span style="color: #ff6b6b;">red background</span> are swordtails, which have reproductive isolation from guppies and cannot be crossed. It is recommended to keep them separately.',
                'hybridTitle': 'ğŸ§¬ Scientific Hybridization Formulas (Premium F1 Combinations)',
                'hybridDesc': 'Combinations designed based on genetic principles, aiming to obtain F1 offspring with excellent appearance and stable genes:',
                'comboName': 'Combination',
                'formula': 'Hybrid Formula',
                'f1Expectation': 'Expected F1 Performance & Selection Goals',
                'geneticKey': 'Genetic Key Points',
                'combo1Name': 'Sky Blue & Tuxedo Enhancement',
                'combo1Formula1': 'â™€ Blue Tuxedo Big C Ã— â™‚ Flaming Sky Blue',
                'combo1Formula2': 'â™€ Common Blue Tuxedo Ã— â™‚ Sky Blue',
                'combo1Desc': 'Obtain individuals with full tail shape (Tuxedo gene) and bright body color (Sky Blue gene). Select in F1:<br>1. Broad caudal fin with distinct black edges<br>2. Pure blue body color without spots<br>3. Keep individuals with high dorsal fins',
                'combo1Key': 'Tuxedo gene (semi-dominant) + Sky Blue gene (sex-linked)',
                'combo2Name': 'Metal Blue Grass Improvement',
                'combo2Formula1': 'â™€ Blue Grass Tail Ã— â™‚ Metal Blue Grass Tail',
                'combo2Formula2': 'â™€ Red-Bodied Blue Grass Ã— â™‚ Metal Blue Grass Tail',
                'combo2Desc': 'Enhance the metallic luster and blue saturation of grass tails. The red-bodied combination can introduce the yellow gene to improve body shape. Select in F1:<br>1. Strong metallic reflection on scales<br>2. Clear and neat tail fin patterns<br>3. Well-proportioned body without spinal curvature',
                'combo2Key': 'Metal gene (sex-limited) + Blue Grass gene (polygene)',
                'combo3Name': 'Ice Blue & Sky Blue Fusion',
                'combo3Formula1': 'â™€ Ice Blue Ã— â™‚ Sky Blue',
                'combo3Formula2': 'â™€ Ice Blue Ã— â™‚ Flaming Sky Blue',
                'combo3Desc': 'Create transitional color tones between elegant and bright. May obtain new phenotypes like "Crystal Sky Blue". Select in F1:<br>1. Even body color without patches<br>2. Blue has a translucent feel<br>3. Coordinated color between dorsal and caudal fins',
                'combo3Key': 'Ice Blue gene (recessive) + Sky Blue gene (sex-linked)',
                'combo4Name': 'Platinum Gene Purification',
                'combo4Formula1': 'â™€ Platinum Dumbo Ear Ã— â™‚ Platinum Dumbo Ear',
                'combo4Formula2': 'â™€ Platinum Dumbo Ear Ã— â™‚ Red-Bodied Blue Grass',
                'combo4Desc': 'Purify the Platinum gene or introduce the yellow gene to improve body shape. Select in F1:<br>1. Platinum coverage area â‰¥ 80%<br>2. Distinct dumbo ear-like pectoral fins<br>3. Healthy body without deformities',
                'combo4Key': 'Platinum gene (sex-limited) + Red-Body gene (recessive)',
                'combo5Name': 'Special Tail Type Fixation',
                'combo5Formula1': 'â™€ Chrysanthemum Veiltail Ã— â™‚ Blue Tuxedo Big C',
                'combo5Formula2': 'â™€ Chrysanthemum Veiltail Ã— â™‚ Metal Blue Grass Tail',
                'combo5Desc': 'Combine special tail types with high-quality body colors. Select in F1:<br>1. Caudal fin clearly folded like a chrysanthemum<br>2. Spread angle â‰¥ 120Â°<br>3. Stable swimming posture without tilting',
                'combo5Key': 'Chrysanthemum Tail gene (polygene) + Tuxedo/Metal gene',
                'combo6Name': 'Inbreeding Purification',
                'combo6Formula1': 'â™€ Lajuli Ã— â™‚ Lajuli',
                'combo6Formula2': 'â™€ Rainbow Angel Ã— â™‚ Rainbow Angel',
                'combo6Formula3': 'â™€ Gold Powder Ã— â™‚ Gold Powder',
                'combo6Desc': 'Maintain purebred gene stability and prevent degeneration. Continuous inbreeding should not exceed 3 generations; record performance each generation.',
                'combo6Key': 'Homozygote maintenance, beware of inbreeding depression',
                'or': 'or',
                'hybridNote': 'Note: All crosses are recommended using healthy broodstock over 6 months old, with a female-to-male ratio of 1:2 or 1:3. Provide ample live food before spawning.',
                'recordTitle': 'ğŸ“ Breeding Project Record Table',
                'recordDesc': 'Record detailed information of each hybridization experiment to track F1 performance and selection progress:',
                'addRecord': '+ Add New Record',
                'clearTable': 'Clear Table',
                'recordId': 'Record ID',
                'hybridDate': 'Hybrid Date',
                'hybridCombo': 'Hybrid Combination',
                'femaleId': 'Female ID',
                'maleId': 'Male ID',
                'spawnDate': 'Spawn Date',
                'f1Count': 'F1 Count',
                'f1Notes': 'F1 Performance & Selection Notes',
                'femalePlaceholder': 'e.g., F-BlueGrass-03',
                'malePlaceholder': 'e.g., M-MetalGrass-07',
                'countPlaceholder': 'Count',
                'notesPlaceholder': 'Record F1 performance...',
                'currentNotes': 'Current Record Notes',
                'currentNotesPlaceholder': 'Record special circumstances, observations, or follow-up plans for this cross...',
                'exportExcel': 'ğŸ“¥ Download Excel Breeding Record',
                'print': 'ğŸ–¨ï¸ Print Current Page',
                'saveLocal': 'ğŸ’¾ Save Data Locally',
                'expertTips': 'ğŸ’¡ Expert Breeding Tips',
                'tip1': '<strong>Law of Segregation</strong>: F1 may show intermediate parental traits; traits segregate in F2. It is recommended to retain F2 for continued selection.',
                'tip2': '<strong>Selection Criteria</strong>: Focus on four indicators: tail type, body color, body shape, and swimming posture. Set specific standards for each.',
                'tip3': '<strong>Importance of Records</strong>: Record parent IDs for each generation in detail to avoid inbreeding leading to genetic decline.',
                'tip4': '<strong>Swordtail Handling</strong>: Swordtails and guppies have reproductive isolation. Please keep them separately.',
                'tip5': '<strong>Health Management</strong>: Provide high-protein live food during breeding periods. Maintain stable water quality (pH 7.0-7.5, temperature 24-26Â°C).',
                'footer': 'Guppy Advanced Hybrid Breeding Management System | Based on Genetic Principles | Data Stored Locally in Browser Only'
            }
        };

        // è¯­è¨€åˆ‡æ¢åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const toggleBtn = document.getElementById('toggleLang');
            let currentLang = localStorage.getItem('guppyLang') || 'zh';

            function applyLanguage(lang) {
                const t = translations[lang];
                // ç¿»è¯‘æ‰€æœ‰å¸¦ data-i18n çš„å…ƒç´ 
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (t[key]) {
                        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT') {
                            // ä¸æ”¹å˜è¾“å…¥æ¡†çš„å€¼ï¼Œåªæ”¹placeholder
                        } else {
                            el.innerHTML = t[key];
                        }
                    }
                });
                // ç¿»è¯‘æ‰€æœ‰ placeholder (data-i18n-ph)
                document.querySelectorAll('[data-i18n-ph]').forEach(el => {
                    const key = el.getAttribute('data-i18n-ph');
                    if (t[key]) {
                        el.setAttribute('placeholder', t[key]);
                    }
                });
                // æ›´æ–°æŒ‰é’®æ–‡æœ¬
                toggleBtn.textContent = lang === 'zh' ? 'EN' : 'ä¸­æ–‡';
                // ä¿å­˜è¯­è¨€åå¥½
                localStorage.setItem('guppyLang', lang);
            }

            toggleBtn.addEventListener('click', function() {
                currentLang = currentLang === 'zh' ? 'en' : 'zh';
                applyLanguage(currentLang);
            });

            // åˆå§‹åŒ–åº”ç”¨è¯­è¨€
            applyLanguage(currentLang);

            // ---------- ä»¥ä¸‹æ˜¯åŸæœ‰çš„è‚²ç§è®°å½•åŠŸèƒ½é€»è¾‘ ----------
            const breedingTableBody = document.getElementById('breedingTableBody');
            const addRecordBtn = document.getElementById('addRecordBtn');
            const clearBtn = document.getElementById('clearBtn');
            const exportExcelBtn = document.getElementById('exportExcelBtn');
            let recordCounter = 2; // ä»2å¼€å§‹ï¼Œå› ä¸ºå·²æœ‰ä¸€æ¡ç¤ºä¾‹è®°å½•

            function showAlert(message) { alert(message); }

            addRecordBtn.addEventListener('click', function() {
                const today = new Date().toISOString().split('T')[0];
                const futureDate = new Date(); futureDate.setDate(futureDate.getDate() + 15);
                const futureDateStr = futureDate.toISOString().split('T')[0];
                const newRow = document.createElement('tr');
                newRow.innerHTML = `<td>BR-${recordCounter.toString().padStart(3, '0')}</td><td><input type="date" value="${today}"></td><td><select><option data-i18n="combo1Name">ç¤¼æœå¤©ç©ºè“å¼ºåŒ–</option><option data-i18n="combo2Name">é‡‘å±è“è‰æ”¹è‰¯</option><option data-i18n="combo3Name">å†°è“å¤©ç©ºèåˆ</option><option data-i18n="combo4Name" selected>ç™½é‡‘åŸºå› æçº¯</option><option data-i18n="combo5Name">ç‰¹æ®Šå°¾å‹å›ºå®š</option><option data-i18n="combo6Name">è‡ªäº¤æçº¯ç»„åˆ</option></select></td><td><input type="text" data-i18n-ph="femalePlaceholder" placeholder="å¦‚: F-ç™½é‡‘-01"></td><td><input type="text" data-i18n-ph="malePlaceholder" placeholder="å¦‚: M-ç™½é‡‘-02"></td><td><input type="date" value="${futureDateStr}"></td><td><input type="number" value="0" min="0" data-i18n-ph="countPlaceholder" placeholder="æ•°é‡"></td><td><textarea rows="2" data-i18n-ph="notesPlaceholder" placeholder="è®°å½•F1ä»£è¡¨ç°..."></textarea></td>`;
                breedingTableBody.appendChild(newRow);
                recordCounter++;
                // ä¸ºæ–°æ·»åŠ çš„è¡Œä¹Ÿåº”ç”¨å½“å‰è¯­è¨€
                applyLanguage(currentLang);
                showAlert(`å·²æ·»åŠ æ–°è®°å½• BR-${(recordCounter-1).toString().padStart(3, '0')}`);
            });

            clearBtn.addEventListener('click', function() {
                if(confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚')) {
                    breedingTableBody.innerHTML = '';
                    recordCounter = 1;
                    showAlert('æ‰€æœ‰è®°å½•å·²æ¸…ç©º');
                }
            });

            exportExcelBtn.addEventListener('click', function() {
                const hybridData = [];
                const breedingData = [];
                document.querySelectorAll('#hybridTable tbody tr').forEach(row => {
                    const cells = row.querySelectorAll('td');
                    if(cells.length >= 4) {
                        hybridData.push({
                            'ç»„åˆåç§°': cells[0].innerText,
                            'æ‚äº¤å…¬å¼': cells[1].innerText.replace(/\s+/g, ' '),
                            'F1ä»£é¢„æœŸè¡¨ç°': cells[2].innerText.replace(/\s+/g, ' '),
                            'é—ä¼ å…³é”®ç‚¹': cells[3].innerText
                        });
                    }
                });
                document.querySelectorAll('#breedingTableBody tr').forEach(row => {
                    const recordId = row.cells[0].innerText;
                    const dateInput = row.cells[1].querySelector('input');
                    const hybridType = row.cells[2].querySelector('select');
                    const femaleId = row.cells[3].querySelector('input');
                    const maleId = row.cells[4].querySelector('input');
                    const spawnDate = row.cells[5].querySelector('input');
                    const fryCount = row.cells[6].querySelector('input');
                    const notes = row.cells[7].querySelector('textarea');
                    breedingData.push({
                        'è®°å½•ID': recordId,
                        'æ‚äº¤æ—¥æœŸ': dateInput?.value || '',
                        'æ‚äº¤ç»„åˆ': hybridType?.value || '',
                        'æ¯æœ¬ç¼–å·': femaleId?.value || '',
                        'çˆ¶æœ¬ç¼–å·': maleId?.value || '',
                        'äº§åµæ—¥æœŸ': spawnDate?.value || '',
                        'F1æ•°é‡': fryCount?.value || '0',
                        'F1ä»£è¡¨ç°': notes?.value || ''
                    });
                });
                const wb = XLSX.utils.book_new();
                const hybridWs = XLSX.utils.json_to_sheet(hybridData);
                XLSX.utils.book_append_sheet(wb, hybridWs, "æ‚äº¤å…¬å¼");
                const breedingWs = XLSX.utils.json_to_sheet(breedingData);
                XLSX.utils.book_append_sheet(wb, breedingWs, "è‚²ç§è®°å½•");
                const notesData = [
                    {'é¡¹ç›®': 'ç³»ç»Ÿè¯´æ˜', 'å†…å®¹': 'å­”é›€é±¼é«˜çº§æ‚äº¤è‚²ç§ç®¡ç†ç³»ç»Ÿ'},
                    {'é¡¹ç›®': 'å¯¼å‡ºæ—¶é—´', 'å†…å®¹': new Date().toLocaleString('zh-CN')}
                ];
                const notesWs = XLSX.utils.json_to_sheet(notesData);
                XLSX.utils.book_append_sheet(wb, notesWs, "è¯´æ˜");
                XLSX.writeFile(wb, `å­”é›€é±¼è‚²ç§è®°å½•_${new Date().toISOString().split('T')[0]}.xlsx`);
                showAlert('Excelæ–‡ä»¶å·²å¼€å§‹ä¸‹è½½');
            });

            document.getElementById('printBtn').addEventListener('click', function() { window.print(); });

            document.getElementById('saveDataBtn').addEventListener('click', function() {
                const data = {
                    breedingRecords: [],
                    notes: document.getElementById('notes').value,
                    lastSaved: new Date().toISOString()
                };
                document.querySelectorAll('#breedingTableBody tr').forEach(row => {
                    const recordId = row.cells[0].innerText;
                    const dateInput = row.cells[1].querySelector('input');
                    const hybridType = row.cells[2].querySelector('select');
                    const femaleId = row.cells[3].querySelector('input');
                    const maleId = row.cells[4].querySelector('input');
                    const spawnDate = row.cells[5].querySelector('input');
                    const fryCount = row.cells[6].querySelector('input');
                    const notes = row.cells[7].querySelector('textarea');
                    data.breedingRecords.push({
                        recordId,
                        hybridDate: dateInput?.value || '',
                        hybridType: hybridType?.value || '',
                        femaleId: femaleId?.value || '',
                        maleId: maleId?.value || '',
                        spawnDate: spawnDate?.value || '',
                        fryCount: fryCount?.value || '0',
                        notes: notes?.value || ''
                    });
                });
                localStorage.setItem('guppyBreedingData', JSON.stringify(data));
                showAlert('æ•°æ®å·²ä¿å­˜åˆ°æœ¬åœ°æµè§ˆå™¨');
            });

            // åŠ è½½ä¹‹å‰ä¿å­˜çš„æ•°æ®
            const savedData = localStorage.getItem('guppyBreedingData');
            if(savedData && confirm('æ£€æµ‹åˆ°æœ¬åœ°ä¿å­˜çš„è‚²ç§æ•°æ®ï¼Œæ˜¯å¦åŠ è½½ï¼Ÿ')) {
                try {
                    const data = JSON.parse(savedData);
                    // ä¿ç•™ç¬¬ä¸€æ¡ç¤ºä¾‹è®°å½•
                    while(breedingTableBody.children.length > 1) {
                        breedingTableBody.removeChild(breedingTableBody.lastChild);
                    }
                    recordCounter = 2;
                    data.breedingRecords.forEach(record => {
                        const newRow = document.createElement('tr');
                        newRow.innerHTML = `<td>${record.recordId}</td><td><input type="date" value="${record.hybridDate}"></td><td><select><option ${record.hybridType==='ç¤¼æœå¤©ç©ºè“å¼ºåŒ–'?'selected':''} data-i18n="combo1Name">ç¤¼æœå¤©ç©ºè“å¼ºåŒ–</option><option ${record.hybridType==='é‡‘å±è“è‰æ”¹è‰¯'?'selected':''} data-i18n="combo2Name">é‡‘å±è“è‰æ”¹è‰¯</option><option ${record.hybridType==='å†°è“å¤©ç©ºèåˆ'?'selected':''} data-i18n="combo3Name">å†°è“å¤©ç©ºèåˆ</option><option ${record.hybridType==='ç™½é‡‘åŸºå› æçº¯'?'selected':''} data-i18n="combo4Name">ç™½é‡‘åŸºå› æçº¯</option><option ${record.hybridType==='ç‰¹æ®Šå°¾å‹å›ºå®š'?'selected':''} data-i18n="combo5Name">ç‰¹æ®Šå°¾å‹å›ºå®š</option><option ${record.hybridType==='è‡ªäº¤æçº¯ç»„åˆ'?'selected':''} data-i18n="combo6Name">è‡ªäº¤æçº¯ç»„åˆ</option></select></td><td><input type="text" value="${record.femaleId}" data-i18n-ph="femalePlaceholder" placeholder="å¦‚: F-ç™½é‡‘-01"></td><td><input type="text" value="${record.maleId}" data-i18n-ph="malePlaceholder" placeholder="å¦‚: M-ç™½é‡‘-02"></td><td><input type="date" value="${record.spawnDate}"></td><td><input type="number" value="${record.fryCount}" min="0" data-i18n-ph="countPlaceholder" placeholder="æ•°é‡"></td><td><textarea rows="2" data-i18n-ph="notesPlaceholder" placeholder="è®°å½•F1ä»£è¡¨ç°...">${record.notes}</textarea></td>`;
                        breedingTableBody.appendChild(newRow);
                        const idNum = parseInt(record.recordId.replace('BR-', ''));
                        if(idNum >= recordCounter) recordCounter = idNum + 1;
                    });
                    if(data.notes) document.getElementById('notes').value = data.notes;
                    // ä¸ºåŠ è½½çš„æ•°æ®è¡Œä¹Ÿåº”ç”¨è¯­è¨€
                    applyLanguage(currentLang);
                    showAlert(`å·²åŠ è½½ ${data.breedingRecords.length} æ¡è®°å½•`);
                } catch(e) {
                    console.error('åŠ è½½æ•°æ®å‡ºé”™:', e);
                }
            }
        });
    </script>
</body>
</html>